<!DOCTYPE html>
<html lang="am">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BINGO ETHIO GOLD</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { --green: #22c55e; --yellow: #facc15; --red: #ef4444; --dark: #0f172a; --card: #1e293b; }
        body { background: var(--dark); color: white; font-family: sans-serif; margin: 0; padding: 0; overflow-x: hidden; }

        /* Navigation */
        .top-nav { display: flex; background: #1e293b; padding: 10px; justify-content: space-around; border-bottom: 2px solid var(--yellow); position: sticky; top: 0; z-index: 1000; }
        .nav-btn { color: #94a3b8; padding: 10px; cursor: pointer; font-weight: bold; border-radius: 8px; font-size: 0.8rem; }
        .nav-btn.active { color: var(--yellow); background: #334155; }
        
        /* Pages */
        .page { display: none; padding: 15px; text-align: center; }
        .page.active { display: block; }

        /* Bingo Styles */
        .ball { width: 80px; height: 80px; background: radial-gradient(circle at 30% 30%, var(--yellow), #a16207); border-radius: 50%; margin: 10px auto; display: flex; align-items: center; justify-content: center; font-size: 2.5rem; font-weight: 900; color: #000; box-shadow: 0 5px 15px rgba(0,0,0,0.5); }
        .bingo-card { background: white; padding: 8px; border-radius: 10px; max-width: 320px; margin: 0 auto; color: #000; }
        .grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 4px; }
        .cell { aspect-ratio: 1; background: #f1f5f9; display: flex; align-items: center; justify-content: center; font-size: 1rem; font-weight: bold; border: 1px solid #ccc; }
        .cell.marked { background: var(--red) !important; color: white; border-radius: 50%; }

        /* Wallet Cards */
        .wallet-card { background: var(--card); padding: 15px; border-radius: 12px; text-align: left; margin-bottom: 15px; border-left: 5px solid var(--green); }
        input { width: 100%; padding: 12px; border-radius: 8px; border: 1px solid #334155; background: #0f172a; color: white; margin-bottom: 10px; box-sizing: border-box; }
        .main-btn { width: 100%; padding: 15px; border: none; border-radius: 12px; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>

    <div class="top-nav">
        <div class="nav-btn active" onclick="showPage('play', this)">üïπ ·àò·å´·ãà·âª</div>
        <div class="nav-btn" id="admin-nav" style="display: none;" onclick="showPage('admin', this)">üîë ·ä†·ãµ·àö·äï</div>
        <div class="nav-btn" onclick="showPage('wallet', this)">üí∞ ·â•·à≠ ·àõ·ãç·å´</div>
    </div>

    <div id="play" class="page active">
        <div id="selector">
            <h3 style="color:var(--yellow)">·ä´·à≠·â¥·àã ·ã≠·àù·à®·å°</h3>
            <div id="picker" style="display:grid; grid-template-columns:repeat(4,1fr); gap:8px;"></div>
        </div>
        <div id="game" style="display:none;">
            <div class="ball" id="live-ball">?</div>
            <div class="bingo-card"><div class="grid" id="board"></div></div>
            <button class="main-btn" style="background:var(--green); color:white; margin-top:15px;" onclick="alert('·â¢·äï·åé ·â∞·àç·ä≥·àç!')">BINGO!</button>
            <button onclick="document.getElementById('game').style.display='none'; document.getElementById('selector').style.display='block';" style="background:none; color:white; border:none; margin-top:15px; cursor:pointer;">üîÑ ·ä´·à≠·â¥·àã ·âÄ·ã≠·à≠</button>
        </div>
    </div>

    <div id="admin" class="page">
        <h2 style="color:var(--yellow)">·ã®·ã≥·äõ ·àò·âÜ·å£·å†·à™·ã´</h2>
        <div class="ball" id="admin-ball">?</div>
        <button class="main-btn" style="background:var(--yellow); color:black;" onclick="adminDraw()">·âÅ·å•·à≠ ·ä†·ãç·å£ (Draw)</button>
        <div id="history" style="margin-top:20px; font-size:0.8rem; color:#94a3b8;"></div>
        <button onclick="resetGame()" style="background:none; color:var(--red); border:none; margin-top:20px; cursor:pointer;">·åå·àô·äï ·ä†·ã≤·àµ ·åÄ·àù·à≠</button>
    </div>

    <div id="wallet" class="page">
        <h3>·ã®·ä™·àµ ·â¶·à≠·à≥</h3>
        <div class="wallet-card">
            <small>·ã´·àà·ãé·âµ ·âÄ·à™ ·àÇ·à≥·â•</small>
            <div style="font-size: 1.5rem; font-weight: bold; color: var(--green);">0.00 ETB</div>
        </div>
        <div class="wallet-card" style="border-left-color: var(--red);">
            <h4 style="color:var(--red); margin:0 0 10px 0;">üí∏ ·â•·à≠ ·àõ·ãç·å´</h4>
            <input type="number" placeholder="·ã®·â•·à≠ ·àò·å†·äï">
            <input type="tel" placeholder="·àµ·àç·ä≠ ·âÅ·å•·à≠">
            <button class="main-btn" style="background:var(--red); color:white;">·ä†·àÅ·äï ·ä†·ãç·å£</button>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        // üî¥ ·ä•·ãö·àÖ ·åã ·ã´·åà·äò·ä∏·ãç·äï ·âÅ·å•·à≠ ·â•·âª ·â∞·ä´ (·àà·àù·à≥·àå: 12345678)
        const MY_ADMIN_ID = 12345678; 

        function checkUserRole() {
            const user = tg.initDataUnsafe.user;
            if (user && user.id === MY_ADMIN_ID) {
                document.getElementById('admin-nav').style.display = 'block';
            }
        }

        function showPage(id, btn) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            btn.classList.add('active');
        }

        let drawnNums = [];
        function adminDraw() {
            if(drawnNums.length >= 75) return alert("·ä†·àç·âã·àç!");
            let n; do { n = Math.floor(Math.random()*75)+1; } while(drawnNums.includes(n));
            drawnNums.push(n);
            document.getElementById('admin-ball').innerText = n;
            document.getElementById('live-ball').innerText = n;
            document.getElementById('history').innerText = "·ã®·ãà·å°·âµ: " + drawnNums.join(", ");
            tg.HapticFeedback.notificationOccurred('success');
        }

        function resetGame() {
            if(confirm("·ä†·ã≤·àµ ·ãô·à≠?")) {
                drawnNums = [];
                document.getElementById('admin-ball').innerText = "?";
                document.getElementById('live-ball').innerText = "?";
                document.getElementById('history').innerText = "";
            }
        }

        function initPicker() {
            const p = document.getElementById('picker');
            for(let i=1; i<=200; i++) {
                let d = document.createElement('div');
                d.style.cssText = "background:var(--card); padding:12px; border-radius:8px; font-weight:bold; border:1px solid #334155; cursor:pointer;";
                d.innerText = i;
                d.onclick = () => {
                    document.getElementById('selector').style.display='none';
                    document.getElementById('game').style.display='block';
                    drawBoard(i);
                };
                p.appendChild(d);
            }
        }

        function drawBoard(seed) {
            const b = document.getElementById('board'); b.innerHTML = "";
            for(let i=0; i<25; i++) {
                let c = document.createElement('div');
                c.className = 'cell';
                c.innerText = Math.floor(Math.random()*75)+1;
                c.onclick = function(){ this.classList.toggle('marked'); tg.HapticFeedback.impactOccurred('light'); };
                b.appendChild(c);
            }
        }

        window.onload = () => {
            initPicker();
            checkUserRole();
        };
    </script>
</body>
</html>

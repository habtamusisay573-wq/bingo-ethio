<!DOCTYPE html>
<html lang="am">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BINGO ETHIO GOLD - FULL EDITION</title>
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>

    <style>
        :root { --green: #22c55e; --yellow: #facc15; --red: #ef4444; --dark: #0f172a; --card: #1e293b; --white: #ffffff; }
        body { background: var(--dark); color: var(--white); font-family: 'Segoe UI', Arial, sans-serif; margin: 0; padding: 0; overflow-x: hidden; }

        /* Header & Nav */
        .header { background: var(--card); padding: 15px; text-align: center; border-bottom: 2px solid var(--yellow); position: sticky; top: 0; z-index: 100; }
        .nav { display: flex; justify-content: space-around; background: #111827; padding: 10px 0; }
        .nav-item { color: #94a3b8; font-size: 0.8rem; font-weight: bold; cursor: pointer; text-decoration: none; padding: 5px 10px; border-radius: 5px; }
        .nav-item.active { color: var(--yellow); background: #1e293b; }

        /* Layout */
        .page { display: none; padding: 20px; animation: fadeIn 0.3s; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Bingo Ball */
        .ball-display { width: 100px; height: 100px; background: radial-gradient(circle at 30% 30%, var(--yellow), #a16207); border-radius: 50%; margin: 20px auto; display: flex; align-items: center; justify-content: center; font-size: 3rem; font-weight: 900; color: #000; box-shadow: 0 0 25px var(--yellow); border: 5px solid #fff; }

        /* Bingo Board */
        .board-container { background: white; padding: 10px; border-radius: 15px; max-width: 350px; margin: 0 auto; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .bingo-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 5px; }
        .cell { aspect-ratio: 1; background: #e2e8f0; color: #1e293b; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; font-weight: bold; border-radius: 8px; border: 1px solid #cbd5e1; cursor: pointer; transition: 0.2s; }
        .cell.marked { background: var(--red) !important; color: white !important; transform: scale(0.9); box-shadow: inset 0 0 10px rgba(0,0,0,0.3); }

        /* UI Elements */
        .stat-card { background: var(--card); padding: 15px; border-radius: 12px; margin-bottom: 15px; border: 1px solid #334155; }
        .btn { width: 100%; padding: 15px; border: none; border-radius: 12px; font-weight: bold; font-size: 1rem; cursor: pointer; transition: 0.3s; margin-top: 10px; }
        .btn-green { background: var(--green); color: white; }
        .btn-yellow { background: var(--yellow); color: black; }
        .btn-red { background: var(--red); color: white; }
        input { width: 100%; padding: 15px; border-radius: 10px; border: 1px solid #334155; background: #0f172a; color: white; margin: 10px 0; box-sizing: border-box; }

        /* Admin Request Items */
        .req-item { background: #111827; padding: 12px; border-radius: 10px; margin-bottom: 10px; border-left: 4px solid var(--yellow); font-size: 0.9rem; }
    </style>
</head>
<body>

    <div class="header">
        <h2 style="margin:0; color:var(--yellow);">BINGO ETHIO GOLD</h2>
    </div>

    <div class="nav">
        <div class="nav-item active" onclick="showPage('play', this)">ğŸ•¹ á‰°áŒ«á‹ˆá‰µ</div>
        <div id="admin-link" class="nav-item" style="display:none;" onclick="showPage('admin', this)">ğŸ”‘ á‹³áŠ›</div>
        <div class="nav-item" onclick="showPage('wallet', this)">ğŸ’° á‹¨áŠªáˆµ á‰¦áˆ­áˆ³</div>
    </div>

    <div id="play" class="page active">
        <div class="stat-card" style="display:flex; justify-content:space-between; align-items:center;">
            <span>á‰£áˆ‹áŠ•áˆµ: <b id="display-bal" style="color:var(--green)">0.00</b> ETB</span>
            <small>áŠ«áˆ­á‰´áˆ‹: 10 ETB</small>
        </div>

        <div id="card-selector">
            <h3 style="text-align:center;">áŠ«áˆ­á‰´áˆ‹ á‹­áˆáˆ¨áŒ¡ (1-200)</h3>
            <div id="picker-grid" style="display:grid; grid-template-columns:repeat(4,1fr); gap:10px;"></div>
        </div>

        <div id="game-area" style="display:none;">
            <div class="ball-display" id="live-ball">?</div>
            <div class="board-container">
                <div id="main-board" class="bingo-grid"></div>
            </div>
            <button class="btn btn-green" onclick="submitBingo()">BINGO!</button>
            <button class="btn" style="background:none; color:#94a3b8;" onclick="location.reload()">ğŸ”„ á‰°áˆ˜áˆˆáˆµ</button>
        </div>
    </div>

    <div id="admin" class="page">
        <div class="ball-display" id="admin-ball">?</div>
        
        <div class="stat-card">
            <h4>á‹¨áŒ¨á‹‹á‰³ á‰áŒ¥áŒ¥áˆ­</h4>
            <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
                <span>áˆáŒ£áŠ• áˆ›á‹áŒ« (3s)</span>
                <input type="checkbox" id="auto-draw-toggle" onchange="toggleAutoDraw()" style="width:25px; height:25px;">
            </div>
            <button class="btn btn-yellow" onclick="manualDraw()">áŠ áŠ•á‹µ á‰áŒ¥áˆ­ áŠ á‹áŒ£</button>
        </div>

        <div class="stat-card">
            <h4 style="color:var(--green)">á‹¨á‰¥áˆ­ áˆ›áˆµáŒˆá‰¢á‹« áŒ¥á‹«á‰„á‹á‰½</h4>
            <div id="deposit-requests">áŒ¥á‹«á‰„ á‹¨áˆˆáˆ...</div>
        </div>

        <div class="stat-card">
            <h4 style="color:var(--red)">á‹¨á‰¢áŠ•áŒ áŒ¥á‹«á‰„á‹á‰½ (Verify)</h4>
            <div id="bingo-claims">áŒ¥á‹«á‰„ á‹¨áˆˆáˆ...</div>
        </div>

        <button class="btn btn-red" onclick="resetGameServer()">âš ï¸ áˆáˆ‰áŠ•áˆ áŠ áŒ¥á‹áŠ“ áŠ á‹²áˆµ á‹™áˆ­ áŒ€áˆáˆ­</button>
    </div>

    <div id="wallet" class="page">
        <div class="stat-card" style="border-left:5px solid var(--yellow);">
            <h3 style="color:var(--yellow); margin-top:0;">ğŸ“¥ á‰¥áˆ­ áˆ›áˆµáŒˆá‰¢á‹«</h3>
            <p>á‰´áˆŒá‰¥áˆ­: <b id="pay-phone-display" style="color:var(--green)">0991243423</b></p>
            <input type="text" id="deposit-tid" placeholder="á‹¨áŒá‰¥á‹­á‰µ á‰áŒ¥áˆ­ (TID) á‹«áˆµáŒˆá‰¡">
            <button class="btn btn-yellow" onclick="sendDepositRequest()">á‰£áˆ‹áŠ•áˆµ áŒ¨áˆáˆ­</button>
        </div>

        <div class="stat-card" style="border-left:5px solid var(--red); margin-top:20px;">
            <h3 style="color:var(--red); margin-top:0;">ğŸ’¸ á‰¥áˆ­ áˆ›á‹áŒ«</h3>
            <input type="number" id="withdraw-amount" placeholder="á‹¨á‰¥áˆ­ áˆ˜áŒ áŠ•">
            <input type="tel" id="withdraw-phone" placeholder="á‹¨á‰´áˆŒá‰¥áˆ­ áˆµáˆáŠ­">
            <button class="btn btn-red" onclick="sendWithdrawRequest()">áŠ áˆáŠ• áŠ á‹áŒ£</button>
        </div>
    </div>

    <script>
        // --- Firebase Config (á‹³áŒŠ! áŠ¥á‹šáˆ… áŒ‹áˆ­ á‹¨áˆ«áˆµáˆ…áŠ• á‰áˆá áŒá‹µ áˆ˜á‰°áŠ«á‰µ áŠ áˆˆá‰¥áˆ…) ---
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            databaseURL: "https://your-project-default-rtdb.firebaseio.com",
            projectId: "your-project-id"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        const tg = window.Telegram.WebApp;
        tg.expand();

        const ADMIN_ID = 123456789; // á‹«áŠ•á‰° á‹¨á‰´áˆŒáŒáˆ«áˆ ID
        let userBalance = 0;
        let drawnNumbers = [];
        let autoDrawInterval = null;

        // 1. á‹¨á‰áŒ¥áˆ­ áˆ›áˆ˜áˆ³áˆ°áˆ (Real-time)
        db.ref('gameState/drawnNumbers').on('value', (snapshot) => {
            drawnNumbers = snapshot.val() || [];
            const lastNum = drawnNumbers[drawnNumbers.length - 1] || "?";
            document.getElementById('live-ball').innerText = lastNum;
            document.getElementById('admin-ball').innerText = lastNum;
        });

        // 2. á‹¨á‰£áˆ‹áŠ•áˆµ áˆ›áˆ˜áˆ³áˆ°áˆ
        if(tg.initDataUnsafe.user) {
            const uid = tg.initDataUnsafe.user.id;
            db.ref('users/' + uid + '/balance').on('value', (snapshot) => {
                userBalance = snapshot.val() || 0;
                document.getElementById('display-bal').innerText = userBalance.toFixed(2);
            });
        }

        // 3. áŠ«áˆ­á‰´áˆ‹ áˆ˜ááŒ áˆ­
        function generateBoard(cardId) {
            const board = document.getElementById('main-board');
            board.innerHTML = "";
            for(let i=0; i<25; i++) {
                let val = Math.floor(Math.random() * 75) + 1;
                let cell = document.createElement('div');
                cell.className = 'cell';
                cell.innerText = val;
                cell.onclick = function() {
                    this.classList.toggle('marked');
                    tg.HapticFeedback.impactOccurred('light');
                };
                board.appendChild(cell);
            }
        }

        // 4. áŠ«áˆ­á‰´áˆ‹ áˆ˜áŒá‹›á‰µ
        function buyCard(id) {
            if(userBalance < 10) return alert("á‰ á‰‚ á‰£áˆ‹áŠ•áˆµ á‹¨áˆˆáˆ! áŠ¥á‰£áŠ­á‹ á‰¥áˆ­ á‹«áˆµáŒˆá‰¡á¢");
            const uid = tg.initDataUnsafe.user.id;
            db.ref('users/' + uid + '/balance').set(userBalance - 10);
            
            document.getElementById('card-selector').style.display = 'none';
            document.getElementById('game-area').style.display = 'block';
            generateBoard(id);
        }

        // 5. á‰¥áˆ­ áˆ›áˆµáŒˆá‰¢á‹« áŒ¥á‹«á‰„
        function sendDepositRequest() {
            const tid = document.getElementById('deposit-tid').value;
            if(!tid) return alert("áŠ¥á‰£áŠ­á‹ TID á‹«áˆµáŒˆá‰¡!");
            db.ref('requests/deposits').push({
                uid: tg.initDataUnsafe.user.id,
                name: tg.initDataUnsafe.user.first_name,
                tid: tid,
                time: new Date().toLocaleTimeString()
            });
            alert("áŒ¥á‹«á‰„ á‰°áˆáŠ³áˆ!");
            document.getElementById('deposit-tid').value = "";
        }

        // 6. áŠ á‹µáˆšáŠ• - á‰áŒ¥áˆ­ áˆ›á‹áŒ£á‰µ
        function manualDraw() {
            if(drawnNumbers.length >= 75) return alert("á‰áŒ¥áˆ®á‰½ áŠ áˆá‰€á‹‹áˆ!");
            let n;
            do { n = Math.floor(Math.random() * 75) + 1; } while(drawnNumbers.includes(n));
            drawnNumbers.push(n);
            db.ref('gameState/drawnNumbers').set(drawnNumbers);
        }

        function toggleAutoDraw() {
            const isAuto = document.getElementById('auto-draw-toggle').checked;
            if(isAuto) {
                autoDrawInterval = setInterval(manualDraw, 3000);
            } else {
                clearInterval(autoDrawInterval);
            }
        }

        // 7. áŠ á‹µáˆšáŠ• - á‰¥áˆ­ áˆ›áŒ½á‹°á‰… (Approval)
        db.ref('requests/deposits').on('value', (snapshot) => {
            const list = document.getElementById('deposit-requests');
            list.innerHTML = snapshot.exists() ? "" : "áŒ¥á‹«á‰„ á‹¨áˆˆáˆ...";
            snapshot.forEach((child) => {
                const req = child.val();
                const div = document.createElement('div');
                div.className = 'req-item';
                div.innerHTML = `
                    <b>${req.name}</b> - TID: ${req.tid} <br>
                    <button class="btn btn-green" style="padding:5px; font-size:0.7rem;" onclick="approveDeposit('${child.key}', '${req.uid}')">áŠ áŒ½á‹µá‰… (100 ETB)</button>
                `;
                list.appendChild(div);
            });
        });

        function approveDeposit(reqKey, userId) {
            db.ref('users/' + userId + '/balance').transaction((current) => (current || 0) + 100);
            db.ref('requests/deposits/' + reqKey).remove();
            alert("á‰¥áˆ­ á‰°áŒ¨áˆáˆ¯áˆ!");
        }

        // 8. á”áŒ… áˆ˜á‰€á‹«á‹¨áˆªá‹«
        function showPage(pageId, btn) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            btn.classList.add('active');
        }

        // Start Up
        window.onload = () => {
            const picker = document.getElementById('picker-grid');
            for(let i=1; i<=200; i++) {
                let d = document.createElement('div');
                d.className = 'cell';
                d.style.background = "var(--card)";
                d.style.color = "white";
                d.innerText = i;
                d.onclick = () => buyCard(i);
                picker.appendChild(d);
            }
            if(tg.initDataUnsafe.user && tg.initDataUnsafe.user.id === ADMIN_ID) {
                document.getElementById('admin-link').style.display = 'block';
            }
        };

        function resetGameServer() {
            if(confirm("áˆáˆ‰áŠ•áˆ á‹³á‰³ áˆ‹áŒ¥á‹á‹?")) {
                db.ref('gameState/drawnNumbers').set([]);
                db.ref('requests/deposits').remove();
                alert("á‰°áˆ°áˆ­á‹Ÿáˆ!");
            }
        }
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="am">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BINGO ETHIO GOLD - FULL EDITION</title>
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>

    <style>
        :root { --green: #22c55e; --yellow: #facc15; --red: #ef4444; --dark: #0f172a; --card: #1e293b; --white: #ffffff; }
        body { background: var(--dark); color: var(--white); font-family: 'Segoe UI', Arial, sans-serif; margin: 0; padding: 0; overflow-x: hidden; }

        /* Header & Nav */
        .header { background: var(--card); padding: 15px; text-align: center; border-bottom: 2px solid var(--yellow); position: sticky; top: 0; z-index: 100; }
        .nav { display: flex; justify-content: space-around; background: #111827; padding: 10px 0; }
        .nav-item { color: #94a3b8; font-size: 0.8rem; font-weight: bold; cursor: pointer; text-decoration: none; padding: 5px 10px; border-radius: 5px; }
        .nav-item.active { color: var(--yellow); background: #1e293b; }

        /* Layout */
        .page { display: none; padding: 20px; animation: fadeIn 0.3s; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Bingo Ball */
        .ball-display { width: 100px; height: 100px; background: radial-gradient(circle at 30% 30%, var(--yellow), #a16207); border-radius: 50%; margin: 20px auto; display: flex; align-items: center; justify-content: center; font-size: 3rem; font-weight: 900; color: #000; box-shadow: 0 0 25px var(--yellow); border: 5px solid #fff; }

        /* Bingo Board */
        .board-container { background: white; padding: 10px; border-radius: 15px; max-width: 350px; margin: 0 auto; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .bingo-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 5px; }
        .cell { aspect-ratio: 1; background: #e2e8f0; color: #1e293b; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; font-weight: bold; border-radius: 8px; border: 1px solid #cbd5e1; cursor: pointer; transition: 0.2s; }
        .cell.marked { background: var(--red) !important; color: white !important; transform: scale(0.9); box-shadow: inset 0 0 10px rgba(0,0,0,0.3); }

        /* UI Elements */
        .stat-card { background: var(--card); padding: 15px; border-radius: 12px; margin-bottom: 15px; border: 1px solid #334155; }
        .btn { width: 100%; padding: 15px; border: none; border-radius: 12px; font-weight: bold; font-size: 1rem; cursor: pointer; transition: 0.3s; margin-top: 10px; }
        .btn-green { background: var(--green); color: white; }
        .btn-yellow { background: var(--yellow); color: black; }
        .btn-red { background: var(--red); color: white; }
        input { width: 100%; padding: 15px; border-radius: 10px; border: 1px solid #334155; background: #0f172a; color: white; margin: 10px 0; box-sizing: border-box; }

        /* Admin Request Items */
        .req-item { background: #111827; padding: 12px; border-radius: 10px; margin-bottom: 10px; border-left: 4px solid var(--yellow); font-size: 0.9rem; }
    </style>
</head>
<body>

    <div class="header">
        <h2 style="margin:0; color:var(--yellow);">BINGO ETHIO GOLD</h2>
    </div>

    <div class="nav">
        <div class="nav-item active" onclick="showPage('play', this)">ğŸ•¹ á‰°áŒ«á‹ˆá‰µ</div>
        <div id="admin-link" class="nav-item" style="display:none;" onclick="showPage('admin', this)">ğŸ”‘ á‹³áŠ›</div>
        <div class="nav-item" onclick="showPage('wallet', this)">ğŸ’° á‹¨áŠªáˆµ á‰¦áˆ­áˆ³</div>
    </div>

    <div id="play" class="page active">
        <div class="stat-card" style="display:flex; justify-content:space-between; align-items:center;">
            <span>á‰£áˆ‹áŠ•áˆµ: <b id="display-bal" style="color:var(--green)">0.00</b> ETB</span>
            <small>áŠ«áˆ­á‰´áˆ‹: 10 ETB</small>
        </div>

        <div id="card-selector">
            <h3 style="text-align:center;">áŠ«áˆ­á‰´áˆ‹ á‹­áˆáˆ¨áŒ¡ (1-200)</h3>
            <div id="picker-grid" style="display:grid; grid-template-columns:repeat(4,1fr); gap:10px;"></div>
        </div>

        <div id="game-area" style="display:none;">
            <div class="ball-display" id="live-ball">?</div>
            <div class="board-container">
                <div id="main-board" class="bingo-grid"></div>
            </div>
            <button class="btn btn-green" onclick="submitBingo()">BINGO!</button>
            <button class="btn" style="background:none; color:#94a3b8;" onclick="location.reload()">ğŸ”„ á‰°áˆ˜áˆˆáˆµ</button>
        </div>
    </div>

    <div id="admin" class="page">
        <div class="ball-display" id="admin-ball">?</div>
        
        <div class="stat-card">
            <h4>á‹¨áŒ¨á‹‹á‰³ á‰áŒ¥áŒ¥áˆ­</h4>
            <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
                <span>áˆáŒ£áŠ• áˆ›á‹áŒ« (3s)</span>
                <input type="checkbox" id="auto-draw-toggle" onchange="toggleAutoDraw()" style="width:25px; height:25px;">
            </div>
            <button class="btn btn-yellow" onclick="manualDraw()">áŠ áŠ•á‹µ á‰áŒ¥áˆ­ áŠ á‹áŒ£</button>
        </div>

        <div class="stat-card">
            <h4 style="color:var(--green)">á‹¨á‰¥áˆ­ áˆ›áˆµáŒˆá‰¢á‹« áŒ¥á‹«á‰„á‹á‰½</h4>
            <div id="deposit-requests">áŒ¥á‹«á‰„ á‹¨áˆˆáˆ...</div>
        </div>

        <div class="stat-card">
            <h4 style="color:var(--red)">á‹¨á‰¢áŠ•áŒ áŒ¥á‹«á‰„á‹á‰½ (Verify)</h4>
            <div id="bingo-claims">áŒ¥á‹«á‰„ á‹¨áˆˆáˆ...</div>
        </div>

        <button class="btn btn-red" onclick="resetGameServer()">âš ï¸ áˆáˆ‰áŠ•áˆ áŠ áŒ¥á‹áŠ“ áŠ á‹²áˆµ á‹™áˆ­ áŒ€áˆáˆ­</button>
    </div>

    <div id="wallet" class="page">
        <div class="stat-card" style="border-left:5px solid var(--yellow);">
            <h3 style="color:var(--yellow); margin-top:0;">ğŸ“¥ á‰¥áˆ­ áˆ›áˆµáŒˆá‰¢á‹«</h3>
            <p>á‰´áˆŒá‰¥áˆ­: <b id="pay-phone-display" style="color:var(--green)">0991243423</b></p>
            <input type="text" id="deposit-tid" placeholder="á‹¨áŒá‰¥á‹­á‰µ á‰áŒ¥áˆ­ (TID) á‹«áˆµáŒˆá‰¡">
            <button class="btn btn-yellow" onclick="sendDepositRequest()">á‰£áˆ‹áŠ•áˆµ áŒ¨áˆáˆ­</button>
        </div>

        <div class="stat-card" style="border-left:5px solid var(--red); margin-top:20px;">
            <h3 style="color:var(--red); margin-top:0;">ğŸ’¸ á‰¥áˆ­ áˆ›á‹áŒ«</h3>
            <input type="number" id="withdraw-amount" placeholder="á‹¨á‰¥áˆ­ áˆ˜áŒ áŠ•">
            <input type="tel" id="withdraw-phone" placeholder="á‹¨á‰´áˆŒá‰¥áˆ­ áˆµáˆáŠ­">
            <button class="btn btn-red" onclick="sendWithdrawRequest()">áŠ áˆáŠ• áŠ á‹áŒ£</button>
        </div>
    </div>

    <script>
        // --- Firebase Config (á‹³áŒŠ! áŠ¥á‹šáˆ… áŒ‹áˆ­ á‹¨áˆ«áˆµáˆ…áŠ• á‰áˆá áŒá‹µ áˆ˜á‰°áŠ«á‰µ áŠ áˆˆá‰¥áˆ…) ---
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            databaseURL: "https://your-project-default-rtdb.firebaseio.com",
            projectId: "your-project-id"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        const tg = window.Telegram.WebApp;
        tg.expand();

        const ADMIN_ID = 123456789; // á‹«áŠ•á‰° á‹¨á‰´áˆŒáŒáˆ«áˆ ID
        let userBalance = 0;
        let drawnNumbers = [];
        let autoDrawInterval = null;

        // 1. á‹¨á‰áŒ¥áˆ­ áˆ›áˆ˜áˆ³áˆ°áˆ (Real-time)
        db.ref('gameState/drawnNumbers').on('value', (snapshot) => {
            drawnNumbers = snapshot.val() || [];
            const lastNum = drawnNumbers[drawnNumbers.length - 1] || "?";
            document.getElementById('live-ball').innerText = lastNum;
            document.getElementById('admin-ball').innerText = lastNum;
        });

        // 2. á‹¨á‰£áˆ‹áŠ•áˆµ áˆ›áˆ˜áˆ³áˆ°áˆ
        if(tg.initDataUnsafe.user) {
            const uid = tg.initDataUnsafe.user.id;
            db.ref('users/' + uid + '/balance').on('value', (snapshot) => {
                userBalance = snapshot.val() || 0;
                document.getElementById('display-bal').innerText = userBalance.toFixed(2);
            });
        }

        // 3. áŠ«áˆ­á‰´áˆ‹ áˆ˜ááŒ áˆ­
        function generateBoard(cardId) {
            const board = document.getElementById('main-board');
            board.innerHTML = "";
            for(let i=0; i<25; i++) {
                let val = Math.floor(Math.random() * 75) + 1;
                let cell = document.createElement('div');
                cell.className = 'cell';
                cell.innerText = val;
                cell.onclick = function() {
                    this.classList.toggle('marked');
                    tg.HapticFeedback.impactOccurred('light');
                };
                board.appendChild(cell);
            }
        }

        // 4. áŠ«áˆ­á‰´áˆ‹ áˆ˜áŒá‹›á‰µ
        function buyCard(id) {
            if(userBalance < 10) return alert("á‰ á‰‚ á‰£áˆ‹áŠ•áˆµ á‹¨áˆˆáˆ! áŠ¥á‰£áŠ­á‹ á‰¥áˆ­ á‹«áˆµáŒˆá‰¡á¢");
            const uid = tg.initDataUnsafe.user.id;
            db.ref('users/' + uid + '/balance').set(userBalance - 10);
            
            document.getElementById('card-selector').style.display = 'none';
            document.getElementById('game-area').style.display = 'block';
            generateBoard(id);
        }

        // 5. á‰¥áˆ­ áˆ›áˆµáŒˆá‰¢á‹« áŒ¥á‹«á‰„
        function sendDepositRequest() {
            const tid = document.getElementById('deposit-tid').value;
            if(!tid) return alert("áŠ¥á‰£áŠ­á‹ TID á‹«áˆµáŒˆá‰¡!");
            db.ref('requests/deposits').push({
                uid: tg.initDataUnsafe.user.id,
                name: tg.initDataUnsafe.user.first_name,
                tid: tid,
                time: new Date().toLocaleTimeString()
            });
            alert("áŒ¥á‹«á‰„ á‰°áˆáŠ³áˆ!");
            document.getElementById('deposit-tid').value = "";
        }

        // 6. áŠ á‹µáˆšáŠ• - á‰áŒ¥áˆ­ áˆ›á‹áŒ£á‰µ
        function manualDraw() {
            if(drawnNumbers.length >= 75) return alert("á‰áŒ¥áˆ®á‰½ áŠ áˆá‰€á‹‹áˆ!");
            let n;
            do { n = Math.floor(Math.random() * 75) + 1; } while(drawnNumbers.includes(n));
            drawnNumbers.push(n);
            db.ref('gameState/drawnNumbers').set(drawnNumbers);
        }

        function toggleAutoDraw() {
            const isAuto = document.getElementById('auto-draw-toggle').checked;
            if(isAuto) {
                autoDrawInterval = setInterval(manualDraw, 3000);
            } else {
                clearInterval(autoDrawInterval);
            }
        }

        // 7. áŠ á‹µáˆšáŠ• - á‰¥áˆ­ áˆ›áŒ½á‹°á‰… (Approval)
        db.ref('requests/deposits').on('value', (snapshot) => {
            const list = document.getElementById('deposit-requests');
            list.innerHTML = snapshot.exists() ? "" : "áŒ¥á‹«á‰„ á‹¨áˆˆáˆ...";
            snapshot.forEach((child) => {
                const req = child.val();
                const div = document.createElement('div');
                div.className = 'req-item';
                div.innerHTML = `
                    <b>${req.name}</b> - TID: ${req.tid} <br>
                    <button class="btn btn-green" style="padding:5px; font-size:0.7rem;" onclick="approveDeposit('${child.key}', '${req.uid}')">áŠ áŒ½á‹µá‰… (100 ETB)</button>
                `;
                list.appendChild(div);
            });
        });

        function approveDeposit(reqKey, userId) {
            db.ref('users/' + userId + '/balance').transaction((current) => (current || 0) + 100);
            db.ref('requests/deposits/' + reqKey).remove();
            alert("á‰¥áˆ­ á‰°áŒ¨áˆáˆ¯áˆ!");
        }

        // 8. á”áŒ… áˆ˜á‰€á‹«á‹¨áˆªá‹«
        function showPage(pageId, btn) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            btn.classList.add('active');
        }

        // Start Up
        window.onload = () => {
            const picker = document.getElementById('picker-grid');
            for(let i=1; i<=200; i++) {
                let d = document.createElement('div');
                d.className = 'cell';
                d.style.background = "var(--card)";
                d.style.color = "white";
                d.innerText = i;
                d.onclick = () => buyCard(i);
                picker.appendChild(d);
            }
            if(tg.initDataUnsafe.user && tg.initDataUnsafe.user.id === ADMIN_ID) {
                document.getElementById('admin-link').style.display = 'block';
            }
        };

        function resetGameServer() {
            if(confirm("áˆáˆ‰áŠ•áˆ á‹³á‰³ áˆ‹áŒ¥á‹á‹?")) {
                db.ref('gameState/drawnNumbers').set([]);
                db.ref('requests/deposits').remove();
                alert("á‰°áˆ°áˆ­á‹Ÿáˆ!");
            }
        }
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="am">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BINGO ETHIO GOLD - FULL EDITION</title>
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>

    <style>
        :root { --green: #22c55e; --yellow: #facc15; --red: #ef4444; --dark: #0f172a; --card: #1e293b; --white: #ffffff; }
        body { background: var(--dark); color: var(--white); font-family: 'Segoe UI', Arial, sans-serif; margin: 0; padding: 0; overflow-x: hidden; }

        /* Header & Nav */
        .header { background: var(--card); padding: 15px; text-align: center; border-bottom: 2px solid var(--yellow); position: sticky; top: 0; z-index: 100; }
        .nav { display: flex; justify-content: space-around; background: #111827; padding: 10px 0; }
        .nav-item { color: #94a3b8; font-size: 0.8rem; font-weight: bold; cursor: pointer; text-decoration: none; padding: 5px 10px; border-radius: 5px; }
        .nav-item.active { color: var(--yellow); background: #1e293b; }

        /* Layout */
        .page { display: none; padding: 20px; animation: fadeIn 0.3s; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Bingo Ball */
        .ball-display { width: 100px; height: 100px; background: radial-gradient(circle at 30% 30%, var(--yellow), #a16207); border-radius: 50%; margin: 20px auto; display: flex; align-items: center; justify-content: center; font-size: 3rem; font-weight: 900; color: #000; box-shadow: 0 0 25px var(--yellow); border: 5px solid #fff; }

        /* Bingo Board */
        .board-container { background: white; padding: 10px; border-radius: 15px; max-width: 350px; margin: 0 auto; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .bingo-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 5px; }
        .cell { aspect-ratio: 1; background: #e2e8f0; color: #1e293b; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; font-weight: bold; border-radius: 8px; border: 1px solid #cbd5e1; cursor: pointer; transition: 0.2s; }
        .cell.marked { background: var(--red) !important; color: white !important; transform: scale(0.9); box-shadow: inset 0 0 10px rgba(0,0,0,0.3); }

        /* UI Elements */
        .stat-card { background: var(--card); padding: 15px; border-radius: 12px; margin-bottom: 15px; border: 1px solid #334155; }
        .btn { width: 100%; padding: 15px; border: none; border-radius: 12px; font-weight: bold; font-size: 1rem; cursor: pointer; transition: 0.3s; margin-top: 10px; }
        .btn-green { background: var(--green); color: white; }
        .btn-yellow { background: var(--yellow); color: black; }
        .btn-red { background: var(--red); color: white; }
        input { width: 100%; padding: 15px; border-radius: 10px; border: 1px solid #334155; background: #0f172a; color: white; margin: 10px 0; box-sizing: border-box; }

        /* Admin Request Items */
        .req-item { background: #111827; padding: 12px; border-radius: 10px; margin-bottom: 10px; border-left: 4px solid var(--yellow); font-size: 0.9rem; }
    </style>
</head>
<body>

    <div class="header">
        <h2 style="margin:0; color:var(--yellow);">BINGO ETHIO GOLD</h2>
    </div>

    <div class="nav">
        <div class="nav-item active" onclick="showPage('play', this)">ğŸ•¹ á‰°áŒ«á‹ˆá‰µ</div>
        <div id="admin-link" class="nav-item" style="display:none;" onclick="showPage('admin', this)">ğŸ”‘ á‹³áŠ›</div>
        <div class="nav-item" onclick="showPage('wallet', this)">ğŸ’° á‹¨áŠªáˆµ á‰¦áˆ­áˆ³</div>
    </div>

    <div id="play" class="page active">
        <div class="stat-card" style="display:flex; justify-content:space-between; align-items:center;">
            <span>á‰£áˆ‹áŠ•áˆµ: <b id="display-bal" style="color:var(--green)">0.00</b> ETB</span>
            <small>áŠ«áˆ­á‰´áˆ‹: 10 ETB</small>
        </div>

        <div id="card-selector">
            <h3 style="text-align:center;">áŠ«áˆ­á‰´áˆ‹ á‹­áˆáˆ¨áŒ¡ (1-200)</h3>
            <div id="picker-grid" style="display:grid; grid-template-columns:repeat(4,1fr); gap:10px;"></div>
        </div>

        <div id="game-area" style="display:none;">
            <div class="ball-display" id="live-ball">?</div>
            <div class="board-container">
                <div id="main-board" class="bingo-grid"></div>
            </div>
            <button class="btn btn-green" onclick="submitBingo()">BINGO!</button>
            <button class="btn" style="background:none; color:#94a3b8;" onclick="location.reload()">ğŸ”„ á‰°áˆ˜áˆˆáˆµ</button>
        </div>
    </div>

    <div id="admin" class="page">
        <div class="ball-display" id="admin-ball">?</div>
        
        <div class="stat-card">
            <h4>á‹¨áŒ¨á‹‹á‰³ á‰áŒ¥áŒ¥áˆ­</h4>
            <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
                <span>áˆáŒ£áŠ• áˆ›á‹áŒ« (3s)</span>
                <input type="checkbox" id="auto-draw-toggle" onchange="toggleAutoDraw()" style="width:25px; height:25px;">
            </div>
            <button class="btn btn-yellow" onclick="manualDraw()">áŠ áŠ•á‹µ á‰áŒ¥áˆ­ áŠ á‹áŒ£</button>
        </div>

        <div class="stat-card">
            <h4 style="color:var(--green)">á‹¨á‰¥áˆ­ áˆ›áˆµáŒˆá‰¢á‹« áŒ¥á‹«á‰„á‹á‰½</h4>
            <div id="deposit-requests">áŒ¥á‹«á‰„ á‹¨áˆˆáˆ...</div>
        </div>

        <div class="stat-card">
            <h4 style="color:var(--red)">á‹¨á‰¢áŠ•áŒ áŒ¥á‹«á‰„á‹á‰½ (Verify)</h4>
            <div id="bingo-claims">áŒ¥á‹«á‰„ á‹¨áˆˆáˆ...</div>
        </div>

        <button class="btn btn-red" onclick="resetGameServer()">âš ï¸ áˆáˆ‰áŠ•áˆ áŠ áŒ¥á‹áŠ“ áŠ á‹²áˆµ á‹™áˆ­ áŒ€áˆáˆ­</button>
    </div>

    <div id="wallet" class="page">
        <div class="stat-card" style="border-left:5px solid var(--yellow);">
            <h3 style="color:var(--yellow); margin-top:0;">ğŸ“¥ á‰¥áˆ­ áˆ›áˆµáŒˆá‰¢á‹«</h3>
            <p>á‰´áˆŒá‰¥áˆ­: <b id="pay-phone-display" style="color:var(--green)">0991243423</b></p>
            <input type="text" id="deposit-tid" placeholder="á‹¨áŒá‰¥á‹­á‰µ á‰áŒ¥áˆ­ (TID) á‹«áˆµáŒˆá‰¡">
            <button class="btn btn-yellow" onclick="sendDepositRequest()">á‰£áˆ‹áŠ•áˆµ áŒ¨áˆáˆ­</button>
        </div>

        <div class="stat-card" style="border-left:5px solid var(--red); margin-top:20px;">
            <h3 style="color:var(--red); margin-top:0;">ğŸ’¸ á‰¥áˆ­ áˆ›á‹áŒ«</h3>
            <input type="number" id="withdraw-amount" placeholder="á‹¨á‰¥áˆ­ áˆ˜áŒ áŠ•">
            <input type="tel" id="withdraw-phone" placeholder="á‹¨á‰´áˆŒá‰¥áˆ­ áˆµáˆáŠ­">
            <button class="btn btn-red" onclick="sendWithdrawRequest()">áŠ áˆáŠ• áŠ á‹áŒ£</button>
        </div>
    </div>

    <script>
        // --- Firebase Config (á‹³áŒŠ! áŠ¥á‹šáˆ… áŒ‹áˆ­ á‹¨áˆ«áˆµáˆ…áŠ• á‰áˆá áŒá‹µ áˆ˜á‰°áŠ«á‰µ áŠ áˆˆá‰¥áˆ…) ---
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            databaseURL: "https://your-project-default-rtdb.firebaseio.com",
            projectId: "your-project-id"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        const tg = window.Telegram.WebApp;
        tg.expand();

        const ADMIN_ID = 123456789; // á‹«áŠ•á‰° á‹¨á‰´áˆŒáŒáˆ«áˆ ID
        let userBalance = 0;
        let drawnNumbers = [];
        let autoDrawInterval = null;

        // 1. á‹¨á‰áŒ¥áˆ­ áˆ›áˆ˜áˆ³áˆ°áˆ (Real-time)
        db.ref('gameState/drawnNumbers').on('value', (snapshot) => {
            drawnNumbers = snapshot.val() || [];
            const lastNum = drawnNumbers[drawnNumbers.length - 1] || "?";
            document.getElementById('live-ball').innerText = lastNum;
            document.getElementById('admin-ball').innerText = lastNum;
        });

        // 2. á‹¨á‰£áˆ‹áŠ•áˆµ áˆ›áˆ˜áˆ³áˆ°áˆ
        if(tg.initDataUnsafe.user) {
            const uid = tg.initDataUnsafe.user.id;
            db.ref('users/' + uid + '/balance').on('value', (snapshot) => {
                userBalance = snapshot.val() || 0;
                document.getElementById('display-bal').innerText = userBalance.toFixed(2);
            });
        }

        // 3. áŠ«áˆ­á‰´áˆ‹ áˆ˜ááŒ áˆ­
        function generateBoard(cardId) {
            const board = document.getElementById('main-board');
            board.innerHTML = "";
            for(let i=0; i<25; i++) {
                let val = Math.floor(Math.random() * 75) + 1;
                let cell = document.createElement('div');
                cell.className = 'cell';
                cell.innerText = val;
                cell.onclick = function() {
                    this.classList.toggle('marked');
                    tg.HapticFeedback.impactOccurred('light');
                };
                board.appendChild(cell);
            }
        }

        // 4. áŠ«áˆ­á‰´áˆ‹ áˆ˜áŒá‹›á‰µ
        function buyCard(id) {
            if(userBalance < 10) return alert("á‰ á‰‚ á‰£áˆ‹áŠ•áˆµ á‹¨áˆˆáˆ! áŠ¥á‰£áŠ­á‹ á‰¥áˆ­ á‹«áˆµáŒˆá‰¡á¢");
            const uid = tg.initDataUnsafe.user.id;
            db.ref('users/' + uid + '/balance').set(userBalance - 10);
            
            document.getElementById('card-selector').style.display = 'none';
            document.getElementById('game-area').style.display = 'block';
            generateBoard(id);
        }

        // 5. á‰¥áˆ­ áˆ›áˆµáŒˆá‰¢á‹« áŒ¥á‹«á‰„
        function sendDepositRequest() {
            const tid = document.getElementById('deposit-tid').value;
            if(!tid) return alert("áŠ¥á‰£áŠ­á‹ TID á‹«áˆµáŒˆá‰¡!");
            db.ref('requests/deposits').push({
                uid: tg.initDataUnsafe.user.id,
                name: tg.initDataUnsafe.user.first_name,
                tid: tid,
                time: new Date().toLocaleTimeString()
            });
            alert("áŒ¥á‹«á‰„ á‰°áˆáŠ³áˆ!");
            document.getElementById('deposit-tid').value = "";
        }

        // 6. áŠ á‹µáˆšáŠ• - á‰áŒ¥áˆ­ áˆ›á‹áŒ£á‰µ
        function manualDraw() {
            if(drawnNumbers.length >= 75) return alert("á‰áŒ¥áˆ®á‰½ áŠ áˆá‰€á‹‹áˆ!");
            let n;
            do { n = Math.floor(Math.random() * 75) + 1; } while(drawnNumbers.includes(n));
            drawnNumbers.push(n);
            db.ref('gameState/drawnNumbers').set(drawnNumbers);
        }

        function toggleAutoDraw() {
            const isAuto = document.getElementById('auto-draw-toggle').checked;
            if(isAuto) {
                autoDrawInterval = setInterval(manualDraw, 3000);
            } else {
                clearInterval(autoDrawInterval);
            }
        }

        // 7. áŠ á‹µáˆšáŠ• - á‰¥áˆ­ áˆ›áŒ½á‹°á‰… (Approval)
        db.ref('requests/deposits').on('value', (snapshot) => {
            const list = document.getElementById('deposit-requests');
            list.innerHTML = snapshot.exists() ? "" : "áŒ¥á‹«á‰„ á‹¨áˆˆáˆ...";
            snapshot.forEach((child) => {
                const req = child.val();
                const div = document.createElement('div');
                div.className = 'req-item';
                div.innerHTML = `
                    <b>${req.name}</b> - TID: ${req.tid} <br>
                    <button class="btn btn-green" style="padding:5px; font-size:0.7rem;" onclick="approveDeposit('${child.key}', '${req.uid}')">áŠ áŒ½á‹µá‰… (100 ETB)</button>
                `;
                list.appendChild(div);
            });
        });

        function approveDeposit(reqKey, userId) {
            db.ref('users/' + userId + '/balance').transaction((current) => (current || 0) + 100);
            db.ref('requests/deposits/' + reqKey).remove();
            alert("á‰¥áˆ­ á‰°áŒ¨áˆáˆ¯áˆ!");
        }

        // 8. á”áŒ… áˆ˜á‰€á‹«á‹¨áˆªá‹«
        function showPage(pageId, btn) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            btn.classList.add('active');
        }

        // Start Up
        window.onload = () => {
            const picker = document.getElementById('picker-grid');
            for(let i=1; i<=200; i++) {
                let d = document.createElement('div');
                d.className = 'cell';
                d.style.background = "var(--card)";
                d.style.color = "white";
                d.innerText = i;
                d.onclick = () => buyCard(i);
                picker.appendChild(d);
            }
            if(tg.initDataUnsafe.user && tg.initDataUnsafe.user.id === ADMIN_ID) {
                document.getElementById('admin-link').style.display = 'block';
            }
        };

        function resetGameServer() {
            if(confirm("áˆáˆ‰áŠ•áˆ á‹³á‰³ áˆ‹áŒ¥á‹á‹?")) {
                db.ref('gameState/drawnNumbers').set([]);
                db.ref('requests/deposits').remove();
                alert("á‰°áˆ°áˆ­á‹Ÿáˆ!");
            }
        }
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="am">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BINGO ETHIO GOLD - FULL EDITION</title>
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>

    <style>
        :root { --green: #22c55e; --yellow: #facc15; --red: #ef4444; --dark: #0f172a; --card: #1e293b; --white: #ffffff; }
        body { background: var(--dark); color: var(--white); font-family: 'Segoe UI', Arial, sans-serif; margin: 0; padding: 0; overflow-x: hidden; }

        /* Header & Nav */
        .header { background: var(--card); padding: 15px; text-align: center; border-bottom: 2px solid var(--yellow); position: sticky; top: 0; z-index: 100; }
        .nav { display: flex; justify-content: space-around; background: #111827; padding: 10px 0; }
        .nav-item { color: #94a3b8; font-size: 0.8rem; font-weight: bold; cursor: pointer; text-decoration: none; padding: 5px 10px; border-radius: 5px; }
        .nav-item.active { color: var(--yellow); background: #1e293b; }

        /* Layout */
        .page { display: none; padding: 20px; animation: fadeIn 0.3s; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Bingo Ball */
        .ball-display { width: 100px; height: 100px; background: radial-gradient(circle at 30% 30%, var(--yellow), #a16207); border-radius: 50%; margin: 20px auto; display: flex; align-items: center; justify-content: center; font-size: 3rem; font-weight: 900; color: #000; box-shadow: 0 0 25px var(--yellow); border: 5px solid #fff; }

        /* Bingo Board */
        .board-container { background: white; padding: 10px; border-radius: 15px; max-width: 350px; margin: 0 auto; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .bingo-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 5px; }
        .cell { aspect-ratio: 1; background: #e2e8f0; color: #1e293b; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; font-weight: bold; border-radius: 8px; border: 1px solid #cbd5e1; cursor: pointer; transition: 0.2s; }
        .cell.marked { background: var(--red) !important; color: white !important; transform: scale(0.9); box-shadow: inset 0 0 10px rgba(0,0,0,0.3); }

        /* UI Elements */
        .stat-card { background: var(--card); padding: 15px; border-radius: 12px; margin-bottom: 15px; border: 1px solid #334155; }
        .btn { width: 100%; padding: 15px; border: none; border-radius: 12px; font-weight: bold; font-size: 1rem; cursor: pointer; transition: 0.3s; margin-top: 10px; }
        .btn-green { background: var(--green); color: white; }
        .btn-yellow { background: var(--yellow); color: black; }
        .btn-red { background: var(--red); color: white; }
        input { width: 100%; padding: 15px; border-radius: 10px; border: 1px solid #334155; background: #0f172a; color: white; margin: 10px 0; box-sizing: border-box; }

        /* Admin Request Items */
        .req-item { background: #111827; padding: 12px; border-radius: 10px; margin-bottom: 10px; border-left: 4px solid var(--yellow); font-size: 0.9rem; }
    </style>
</head>
<body>

    <div class="header">
        <h2 style="margin:0; color:var(--yellow);">BINGO ETHIO GOLD</h2>
    </div>

    <div class="nav">
        <div class="nav-item active" onclick="showPage('play', this)">ğŸ•¹ á‰°áŒ«á‹ˆá‰µ</div>
        <div id="admin-link" class="nav-item" style="display:none;" onclick="showPage('admin', this)">ğŸ”‘ á‹³áŠ›</div>
        <div class="nav-item" onclick="showPage('wallet', this)">ğŸ’° á‹¨áŠªáˆµ á‰¦áˆ­áˆ³</div>
    </div>

    <div id="play" class="page active">
        <div class="stat-card" style="display:flex; justify-content:space-between; align-items:center;">
            <span>á‰£áˆ‹áŠ•áˆµ: <b id="display-bal" style="color:var(--green)">0.00</b> ETB</span>
            <small>áŠ«áˆ­á‰´áˆ‹: 10 ETB</small>
        </div>

        <div id="card-selector">
            <h3 style="text-align:center;">áŠ«áˆ­á‰´áˆ‹ á‹­áˆáˆ¨áŒ¡ (1-200)</h3>
            <div id="picker-grid" style="display:grid; grid-template-columns:repeat(4,1fr); gap:10px;"></div>
        </div>

        <div id="game-area" style="display:none;">
            <div class="ball-display" id="live-ball">?</div>
            <div class="board-container">
                <div id="main-board" class="bingo-grid"></div>
            </div>
            <button class="btn btn-green" onclick="submitBingo()">BINGO!</button>
            <button class="btn" style="background:none; color:#94a3b8;" onclick="location.reload()">ğŸ”„ á‰°áˆ˜áˆˆáˆµ</button>
        </div>
    </div>

    <div id="admin" class="page">
        <div class="ball-display" id="admin-ball">?</div>
        
        <div class="stat-card">
            <h4>á‹¨áŒ¨á‹‹á‰³ á‰áŒ¥áŒ¥áˆ­</h4>
            <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
                <span>áˆáŒ£áŠ• áˆ›á‹áŒ« (3s)</span>
                <input type="checkbox" id="auto-draw-toggle" onchange="toggleAutoDraw()" style="width:25px; height:25px;">
            </div>
            <button class="btn btn-yellow" onclick="manualDraw()">áŠ áŠ•á‹µ á‰áŒ¥áˆ­ áŠ á‹áŒ£</button>
        </div>

        <div class="stat-card">
            <h4 style="color:var(--green)">á‹¨á‰¥áˆ­ áˆ›áˆµáŒˆá‰¢á‹« áŒ¥á‹«á‰„á‹á‰½</h4>
            <div id="deposit-requests">áŒ¥á‹«á‰„ á‹¨áˆˆáˆ...</div>
        </div>

        <div class="stat-card">
            <h4 style="color:var(--red)">á‹¨á‰¢áŠ•áŒ áŒ¥á‹«á‰„á‹á‰½ (Verify)</h4>
            <div id="bingo-claims">áŒ¥á‹«á‰„ á‹¨áˆˆáˆ...</div>
        </div>

        <button class="btn btn-red" onclick="resetGameServer()">âš ï¸ áˆáˆ‰áŠ•áˆ áŠ áŒ¥á‹áŠ“ áŠ á‹²áˆµ á‹™áˆ­ áŒ€áˆáˆ­</button>
    </div>

    <div id="wallet" class="page">
        <div class="stat-card" style="border-left:5px solid var(--yellow);">
            <h3 style="color:var(--yellow); margin-top:0;">ğŸ“¥ á‰¥áˆ­ áˆ›áˆµáŒˆá‰¢á‹«</h3>
            <p>á‰´áˆŒá‰¥áˆ­: <b id="pay-phone-display" style="color:var(--green)">0991243423</b></p>
            <input type="text" id="deposit-tid" placeholder="á‹¨áŒá‰¥á‹­á‰µ á‰áŒ¥áˆ­ (TID) á‹«áˆµáŒˆá‰¡">
            <button class="btn btn-yellow" onclick="sendDepositRequest()">á‰£áˆ‹áŠ•áˆµ áŒ¨áˆáˆ­</button>
        </div>

        <div class="stat-card" style="border-left:5px solid var(--red); margin-top:20px;">
            <h3 style="color:var(--red); margin-top:0;">ğŸ’¸ á‰¥áˆ­ áˆ›á‹áŒ«</h3>
            <input type="number" id="withdraw-amount" placeholder="á‹¨á‰¥áˆ­ áˆ˜áŒ áŠ•">
            <input type="tel" id="withdraw-phone" placeholder="á‹¨á‰´áˆŒá‰¥áˆ­ áˆµáˆáŠ­">
            <button class="btn btn-red" onclick="sendWithdrawRequest()">áŠ áˆáŠ• áŠ á‹áŒ£</button>
        </div>
    </div>

    <script>
        // --- Firebase Config (á‹³áŒŠ! áŠ¥á‹šáˆ… áŒ‹áˆ­ á‹¨áˆ«áˆµáˆ…áŠ• á‰áˆá áŒá‹µ áˆ˜á‰°áŠ«á‰µ áŠ áˆˆá‰¥áˆ…) ---
        const firebaseConfig = {
            apiKey: "  Your token was replaced with a new one. You can use this token to access HTTP API:
8554733015:AAHAYbYVDzGWXOLXBOUnOgf7uBH-QLhkyxk   ",
            databaseURL: "   Https://dagi-bingo-default-rtdb.firebaseio.com ",
            projectId: "your-project-id"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        const tg = window.Telegram.WebApp;
        tg.expand();

        const ADMIN_ID = 123456789; // á‹«áŠ•á‰° á‹¨á‰´áˆŒáŒáˆ«áˆ ID
        let userBalance = 0;
        let drawnNumbers = [];
        let autoDrawInterval = null;

        // 1. á‹¨á‰áŒ¥áˆ­ áˆ›áˆ˜áˆ³áˆ°áˆ (Real-time)
        db.ref('gameState/drawnNumbers').on('value', (snapshot) => {
            drawnNumbers = snapshot.val() || [];
            const lastNum = drawnNumbers[drawnNumbers.length - 1] || "?";
            document.getElementById('live-ball').innerText = lastNum;
            document.getElementById('admin-ball').innerText = lastNum;
        });

        // 2. á‹¨á‰£áˆ‹áŠ•áˆµ áˆ›áˆ˜áˆ³áˆ°áˆ
        if(tg.initDataUnsafe.user) {
            const uid = tg.initDataUnsafe.user.id;
            db.ref('users/' + uid + '/balance').on('value', (snapshot) => {
                userBalance = snapshot.val() || 0;
                document.getElementById('display-bal').innerText = userBalance.toFixed(2);
            });
        }

        // 3. áŠ«áˆ­á‰´áˆ‹ áˆ˜ááŒ áˆ­
        function generateBoard(cardId) {
            const board = document.getElementById('main-board');
            board.innerHTML = "";
            for(let i=0; i<25; i++) {
                let val = Math.floor(Math.random() * 75) + 1;
                let cell = document.createElement('div');
                cell.className = 'cell';
                cell.innerText = val;
                cell.onclick = function() {
                    this.classList.toggle('marked');
                    tg.HapticFeedback.impactOccurred('light');
                };
                board.appendChild(cell);
            }
        }

        // 4. áŠ«áˆ­á‰´áˆ‹ áˆ˜áŒá‹›á‰µ
        function buyCard(id) {
            if(userBalance < 10) return alert("á‰ á‰‚ á‰£áˆ‹áŠ•áˆµ á‹¨áˆˆáˆ! áŠ¥á‰£áŠ­á‹ á‰¥áˆ­ á‹«áˆµáŒˆá‰¡á¢");
            const uid = tg.initDataUnsafe.user.id;
            db.ref('users/' + uid + '/balance').set(userBalance - 10);
            
            document.getElementById('card-selector').style.display = 'none';
            document.getElementById('game-area').style.display = 'block';
            generateBoard(id);
        }

        // 5. á‰¥áˆ­ áˆ›áˆµáŒˆá‰¢á‹« áŒ¥á‹«á‰„
        function sendDepositRequest() {
            const tid = document.getElementById('deposit-tid').value;
            if(!tid) return alert("áŠ¥á‰£áŠ­á‹ TID á‹«áˆµáŒˆá‰¡!");
            db.ref('requests/deposits').push({
                uid: tg.initDataUnsafe.user.id,
                name: tg.initDataUnsafe.user.first_name,
                tid: tid,
                time: new Date().toLocaleTimeString()
            });
            alert("áŒ¥á‹«á‰„ á‰°áˆáŠ³áˆ!");
            document.getElementById('deposit-tid').value = "";
        }

        // 6. áŠ á‹µáˆšáŠ• - á‰áŒ¥áˆ­ áˆ›á‹áŒ£á‰µ
        function manualDraw() {
            if(drawnNumbers.length >= 75) return alert("á‰áŒ¥áˆ®á‰½ áŠ áˆá‰€á‹‹áˆ!");
            let n;
            do { n = Math.floor(Math.random() * 75) + 1; } while(drawnNumbers.includes(n));
            drawnNumbers.push(n);
            db.ref('gameState/drawnNumbers').set(drawnNumbers);
        }

        function toggleAutoDraw() {
            const isAuto = document.getElementById('auto-draw-toggle').checked;
            if(isAuto) {
                autoDrawInterval = setInterval(manualDraw, 3000);
            } else {
                clearInterval(autoDrawInterval);
            }
        }

        // 7. áŠ á‹µáˆšáŠ• - á‰¥áˆ­ áˆ›áŒ½á‹°á‰… (Approval)
        db.ref('requests/deposits').on('value', (snapshot) => {
            const list = document.getElementById('deposit-requests');
            list.innerHTML = snapshot.exists() ? "" : "áŒ¥á‹«á‰„ á‹¨áˆˆáˆ...";
            snapshot.forEach((child) => {
                const req = child.val();
                const div = document.createElement('div');
                div.className = 'req-item';
                div.innerHTML = `
                    <b>${req.name}</b> - TID: ${req.tid} <br>
                    <button class="btn btn-green" style="padding:5px; font-size:0.7rem;" onclick="approveDeposit('${child.key}', '${req.uid}')">áŠ áŒ½á‹µá‰… (100 ETB)</button>
                `;
                list.appendChild(div);
            });
        });

        function approveDeposit(reqKey, userId) {
            db.ref('users/' + userId + '/balance').transaction((current) => (current || 0) + 100);
            db.ref('requests/deposits/' + reqKey).remove();
            alert("á‰¥áˆ­ á‰°áŒ¨áˆáˆ¯áˆ!");
        }

        // 8. á”áŒ… áˆ˜á‰€á‹«á‹¨áˆªá‹«
        function showPage(pageId, btn) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            btn.classList.add('active');
        }

        // Start Up
        window.onload = () => {
            const picker = document.getElementById('picker-grid');
            for(let i=1; i<=200; i++) {
                let d = document.createElement('div');
                d.className = 'cell';
                d.style.background = "var(--card)";
                d.style.color = "white";
                d.innerText = i;
                d.onclick = () => buyCard(i);
                picker.appendChild(d);
            }
            if(tg.initDataUnsafe.user && tg.initDataUnsafe.user.id === ADMIN_ID) {
                document.getElementById('admin-link').style.display = 'block';
            }
        };

        function resetGameServer() {
            if(confirm("áˆáˆ‰áŠ•áˆ á‹³á‰³ áˆ‹áŒ¥á‹á‹?")) {
                db.ref('gameState/drawnNumbers').set([]);
                db.ref('requests/deposits').remove();
                alert("á‰°áˆ°áˆ­á‹Ÿáˆ!");
            }
        }
    </script>
</body>
</html>
